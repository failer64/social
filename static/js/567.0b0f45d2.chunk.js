"use strict";(self.webpackChunksocial=self.webpackChunksocial||[]).push([[567],{4567:function(e,n,s){s.r(n),s.d(n,{default:function(){return g},wsChanel:function(){return f}});var r=s(3433),a=s(9439),t=s(2791),i=s(7689),c=s(9434),u=s(2590),o="Messenger_body__vMBbZ",d="Messenger_avatar__pIVta",l="Messenger_name__WOYFJ",v="Messenger_text__nW1Nc",h=s(184),x=function(){var e=(0,t.useState)(""),n=(0,a.Z)(e,2),s=n[0],r=n[1];return(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{children:(0,h.jsx)("input",{type:"text",value:s,onChange:function(e){return n=e.target.value,void r(n);var n}})}),(0,h.jsx)("div",{children:(0,h.jsx)("button",{onClick:function(){s&&f.send(s),r("")},children:"send"})})]})},f=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"),j=function(){var e=(0,t.useState)([]),n=(0,a.Z)(e,2),s=n[0],i=n[1];return(0,t.useEffect)((function(){f.onmessage=function(e){var n=JSON.parse(e.data);i((function(e){return[].concat((0,r.Z)(e),(0,r.Z)(n))}))}})),(0,h.jsx)("div",{children:s.map((function(e,n){return(0,h.jsx)(m,{message:e},n)}))})},m=function(e){var n=e.message,s=(0,i.s0)(),r=function(){s("/profile/".concat(n.userId))};return(0,h.jsxs)("div",{className:o,children:[(0,h.jsx)("div",{onClick:r,className:d,children:(0,h.jsx)("img",{src:n.photo,alt:"avatar"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("div",{onClick:r,className:l,children:n.userName}),(0,h.jsx)("div",{className:v,children:n.message})]}),(0,h.jsx)("hr",{})]})},g=function(){return(0,c.v9)(u.d)?(0,h.jsxs)("div",{children:[(0,h.jsx)(j,{}),(0,h.jsx)(x,{})]}):(0,h.jsx)(i.Fg,{to:"/login"})}}}]);
//# sourceMappingURL=567.0b0f45d2.chunk.js.map