{"version":3,"file":"static/js/567.0b0f45d2.chunk.js","mappings":"gPACA,EAAuB,wBAAvB,EAAwD,0BAAxD,EAAyF,wBAAzF,EAAwH,wB,SCE3GA,EAAgB,WACzB,OAAoCC,EAAAA,EAAAA,UAAS,IAA7C,eAAOC,EAAP,KAAmBC,EAAnB,KAaA,OACI,4BACI,0BACI,kBAAOC,KAAK,OAAOC,MAAOH,EAAYI,SAAU,SAACC,GAAD,OAdnCC,EAc0DD,EAAEE,OAAOJ,WAbxFF,EAAcK,GADM,IAACA,CAcmC,OAEpD,0BACI,mBAAQE,QAbA,WACZR,GACAS,EAASC,KAAKV,GAElBC,EAAc,GACjB,EAQW,sBAIf,ECnBYQ,EAAW,IAAIE,UAAU,gEAahCC,EAAe,WACjB,OAAgCb,EAAAA,EAAAA,UAA0B,IAA1D,eAAOc,EAAP,KAAiBC,EAAjB,KASA,OAPAC,EAAAA,EAAAA,YAAU,WACNN,EAASO,UAAY,SAACX,GAClB,IAAMY,EAAOC,KAAKC,MAAMd,EAAEY,MAC1BH,GAAY,SAAAM,GAAS,wBAAQA,IAAR,OAAsBH,GAAtB,GACxB,CACJ,KAGG,yBACKJ,EAASQ,KAAI,SAACC,EAAGC,GAAJ,OAAc,SAACC,EAAD,CAAkBC,QAASH,GAAhBC,EAAzB,KAGzB,EAEKC,EAAsB,SAAC,GAAe,IAAdC,EAAa,EAAbA,QACpBC,GAAWC,EAAAA,EAAAA,MACXC,EAAc,WAChBF,EAAS,YAAD,OAAaD,EAAQI,QAChC,EACD,OACI,iBAAKC,UAAWC,EAAhB,WACI,gBAAKvB,QAASoB,EAAaE,UAAWC,EAAtC,UACI,gBAAKC,IAAKP,EAAQQ,MAAOC,IAAI,cAEjC,4BACI,gBAAK1B,QAASoB,EAAaE,UAAWC,EAAtC,SAAoDN,EAAQU,YAC5D,gBAAKL,UAAWC,EAAhB,SAA8BN,EAAQA,cAE1C,oBAGX,EAED,EA/CsB,WAElB,OADeW,EAAAA,EAAAA,IAAYC,EAAAA,IAGvB,4BACI,SAACzB,EAAD,KACA,SAACd,EAAD,QAJY,SAAC,KAAD,CAAUwC,GAAI,UAOrC,C","sources":["webpack://social/./src/components/Messenger/Messenger.module.css?367c","components/Messenger/MessengerForm.tsx","components/Messenger/Messenger.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"body\":\"Messenger_body__vMBbZ\",\"avatar\":\"Messenger_avatar__pIVta\",\"name\":\"Messenger_name__WOYFJ\",\"text\":\"Messenger_text__nW1Nc\"};","import React, {useState} from \"react\";\r\nimport {wsChanel} from \"./Messenger\";\r\n\r\nexport const MessengerForm = () => {\r\n    const [newMessage, setNewMessage] = useState('');\r\n\r\n    const onMessageChange = (newText: string) => {\r\n        setNewMessage(newText);\r\n    }\r\n\r\n    const sendMessage = () => {\r\n        if (newMessage) {\r\n            wsChanel.send(newMessage);\r\n        }\r\n        setNewMessage('');\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n                <input type=\"text\" value={newMessage} onChange={(e) => onMessageChange(e.target.value)}/>\r\n            </div>\r\n            <div>\r\n                <button onClick={sendMessage}>send</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, {FC, useEffect, useState} from \"react\";\r\nimport {Navigate, useNavigate} from \"react-router-dom\";\r\nimport {useSelector} from \"react-redux\";\r\nimport {isAuthSelector} from \"../../redux/selectors/auth-selectors\";\r\nimport styles from './Messenger.module.css'\r\nimport {MessengerForm} from \"./MessengerForm\";\r\n\r\n\r\nexport const wsChanel = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx');\r\n\r\nconst Messenger: FC = () => {\r\n    const isAuth = useSelector(isAuthSelector);\r\n    if (!isAuth) return <Navigate to={'/login'}/>;\r\n    return (\r\n        <div>\r\n            <Messages/>\r\n            <MessengerForm/>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Messages: FC = () => {\r\n    const [messages, setMessages] = useState<MessengerType[]>([]);\r\n\r\n    useEffect(() => {\r\n        wsChanel.onmessage = (e) => {\r\n            const data = JSON.parse(e.data);\r\n            setMessages(prevState => [...prevState, ...data]);\r\n        }\r\n    })\r\n\r\n    return (\r\n        <div>\r\n            {messages.map((m, index) => <Item key={index} message={m}/>)}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Item: FC<PropsType> = ({message}) => {\r\n    const navigate = useNavigate();\r\n    const goToProfile = () => {\r\n        navigate(`/profile/${message.userId}`);\r\n    }\r\n    return (\r\n        <div className={styles.body}>\r\n            <div onClick={goToProfile} className={styles.avatar}>\r\n                <img src={message.photo} alt=\"avatar\"/>\r\n            </div>\r\n            <div>\r\n                <div onClick={goToProfile} className={styles.name}>{message.userName}</div>\r\n                <div className={styles.text}>{message.message}</div>\r\n            </div>\r\n            <hr/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Messenger\r\n\r\ntype PropsType = {\r\n    message: MessengerType\r\n}\r\ntype MessengerType = {\r\n    message: string\r\n    photo: string\r\n    userId: number\r\n    userName: string\r\n}"],"names":["MessengerForm","useState","newMessage","setNewMessage","type","value","onChange","e","newText","target","onClick","wsChanel","send","WebSocket","Messages","messages","setMessages","useEffect","onmessage","data","JSON","parse","prevState","map","m","index","Item","message","navigate","useNavigate","goToProfile","userId","className","styles","src","photo","alt","userName","useSelector","isAuthSelector","to"],"sourceRoot":""}